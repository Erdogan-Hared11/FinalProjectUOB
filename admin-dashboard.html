<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Dalag</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
  <!-- Add Chart.js for reporting -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary: #2ed52e;
      --primary-dark: #026302;
      --primary-light: #e8f5e9;
      --light-gray: #f5f5f5;
      --text-dark: #333;
      --shadow: 0 5px 15px rgba(0,0,0,0.1);
      --transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      display: grid;
      grid-template-columns: 250px 1fr;
      min-height: 100vh;
      background-color: #f9f9f9;
      animation: fadeIn 0.8s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* SIDEBAR */
    .sidebar {
      background: white;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      padding: 20px 0;
      position: sticky;
      top: 0;
      height: 100vh;
      z-index: 100;
    }

    .logo {
      text-align: center;
      padding: 20px 0;
      border-bottom: 1px solid #eee;
      transition: var(--transition);
    }

    .logo:hover {
      transform: scale(1.02);
    }

    .logo i {
      color: var(--primary);
      font-size: 2.5rem;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .logo h2 {
      margin-top: 10px;
      font-size: 1.5rem;
      color: var(--primary-dark);
    }

    .nav-menu {
      margin-top: 30px;
    }

    .nav-item {
      padding: 15px 25px;
      cursor: pointer;
      display: flex;
      align-items: center;
      transition: var(--transition);
      margin: 5px 0;
      border-left: 4px solid transparent;
    }

    .nav-item:hover {
      background: var(--primary-light);
      transform: translateX(5px);
    }

    .nav-item.active {
      background: var(--primary-light);
      border-left: 4px solid var(--primary);
      font-weight: 600;
    }

    .nav-item i {
      margin-right: 10px;
      color: var(--primary);
      font-size: 1.1rem;
      transition: var(--transition);
    }

    .nav-item.active i {
      transform: scale(1.2);
    }

    /* MAIN CONTENT */
    .main {
      padding: 30px;
      background: var(--light-gray);
    }

    .section {
      display: none;
      animation: fadeInUp 0.5s ease-out;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section.active {
      display: block;
    }

    h1 {
      color: var(--primary-dark);
      margin-bottom: 20px;
      font-size: 2rem;
      position: relative;
      display: inline-block;
    }

    h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), transparent);
      border-radius: 3px;
    }

    /* Tables */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
      box-shadow: var(--shadow);
      border-radius: 8px;
      overflow: hidden;
      animation: zoomIn 0.5s ease-out;
    }

    @keyframes zoomIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    th, td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }

    th {
      background: var(--primary);
      color: white;
      font-weight: 600;
      position: sticky;
      top: 0;
    }

    tr:hover {
      background-color: var(--primary-light);
    }

    tr {
      transition: var(--transition);
    }

    /* Buttons */
    .action-btn {
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: white;
      font-weight: 500;
      transition: var(--transition);
      margin-right: 5px;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }

    .action-btn:active {
      transform: translateY(0);
    }

    .edit-btn {
      background: var(--primary);
    }

    .edit-btn:hover {
      background: var(--primary-dark);
    }

    .delete-btn {
      background: #ff3333;
    }

    .delete-btn:hover {
      background: #cc0000;
    }

    .submit-btn {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 20px;
    }

    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
    }

    .submit-btn:active {
      transform: translateY(0);
    }

    /* Forms */
    .form-group {
      margin-bottom: 20px;
      animation: fadeIn 0.5s ease-out;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-dark);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
      transition: var(--transition);
    }

    .form-group input:focus,
    .form-group select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(46, 213, 46, 0.2);
      outline: none;
    }

    /* Dashboard Cards */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: var(--shadow);
      text-align: center;
      transition: var(--transition);
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    .stat-card h3 {
      color: var(--primary-dark);
      margin-bottom: 10px;
      font-size: 1.2rem;
    }

    .stat-card p {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      margin: 0;
    }

    /* Shopping Preview */
    .shopping-preview {
      margin-top: 30px;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: var(--shadow);
      animation: fadeIn 0.8s ease-out;
    }

    .preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .Bari-Products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
    }

    .Bari-Product {
      border-radius: 15px;
      box-shadow: 0 3px 12px rgba(123, 190, 123, 0.4);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: var(--transition);
      transform: translateY(0);
    }

    .Bari-Product:hover {
      transform: translateY(-10px);
      box-shadow: 0 10px 25px rgba(90, 176, 90, 0.3);
    }

    .Bari-Product img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      transition: var(--transition);
    }

    .Bari-Product:hover img {
      transform: scale(1.05);
    }

    .product-info {
      padding: 15px;
    }

    .product-info h4 {
      margin-bottom: 5px;
      color: var(--primary-dark);
    }

    .product-info p {
      color: #555;
      font-size: 0.9rem;
      margin-bottom: 5px;
    }

    /* Floating elements */
    .floating-elements {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    .floating-element {
      position: absolute;
      font-size: 1.5rem;
      opacity: 0.1;
      animation: float 10s infinite ease-in-out;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }

    /* Report Section Styles */
    .report-filters {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      align-items: end;
    }

    .filter-group {
      flex: 1;
      min-width: 200px;
    }

    .chart-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: var(--shadow);
      margin-bottom: 20px;
      position: relative;
      height: 400px;
    }

    .report-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .summary-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: var(--shadow);
      text-align: center;
    }

    .summary-card h3 {
      color: var(--primary-dark);
      margin-bottom: 10px;
      font-size: 1rem;
    }

    .summary-card p {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary);
      margin: 0;
    }

    .export-options {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    /* Dashboard specific styles */
    .stat-icon {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--primary);
    }

    .stat-change {
      margin-top: 10px;
      font-size: 0.9rem;
    }

    .change-up {
      color: #2ed52e;
    }

    .change-down {
      color: #ff3333;
    }

    .progress-container {
      margin-top: 15px;
    }

    .progress-title {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
      font-size: 0.9rem;
    }

    .progress-bar {
      height: 8px;
      background-color: #f0f0f0;
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 1s ease-in-out;
    }

    .users-progress {
      background-color: #2ed52e;
    }

    .products-progress {
      background-color: #4287f5;
    }

    .reports-progress {
      background-color: #f542a7;
    }

    .activity-container {
      background: white;
      padding: 25px;
      border-radius: 8px;
      box-shadow: var(--shadow);
      margin-top: 30px;
    }

    .activity-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .activity-list {
      list-style: none;
    }

    .activity-item {
      display: flex;
      padding: 15px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      flex-shrink: 0;
    }

    .activity-icon.users-icon {
      background-color: rgba(46, 213, 46, 0.1);
      color: var(--primary);
    }

    .activity-icon.products-icon {
      background-color: rgba(66, 135, 245, 0.1);
      color: #4287f5;
    }

    .activity-icon.reports-icon {
      background-color: rgba(245, 66, 167, 0.1);
      color: #f542a7;
    }

    .activity-content h4 {
      margin-bottom: 5px;
      color: var(--text-dark);
    }

    .activity-content p {
      color: #666;
      margin-bottom: 5px;
    }

    .activity-time {
      font-size: 0.8rem;
      color: #999;
    }

    /* Notification styles */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 25px;
      border-radius: 8px;
      color: white;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease-out;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .notification.success {
      background: var(--primary);
    }
    
    .notification.error {
      background: #ff3333;
    }
    
    .notification i {
      font-size: 1.2rem;
    }
    
    .status-badge {
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .status-badge.active {
      background: #e8f5e9;
      color: var(--primary-dark);
    }
    
    .status-badge.inactive {
      background: #ffebee;
      color: #d32f2f;
    }
    
    .status-badge.pending {
      background: #fff8e1;
      color: #ff8f00;
    }
    
    .status-badge.confirmed {
      background: #e3f2fd;
      color: #1976d2;
    }
    
    .status-badge.delivered {
      background: #e8f5e9;
      color: #388e3c;
    }
    
    .status-badge.cancelled {
      background: #ffebee;
      color: #d32f2f;
    }
    
    .status-select {
      padding: 8px 12px;
      border-radius: 4px;
      border: 1px solid #ddd;
      font-size: 0.9rem;
    }

    /* Responsive styles */
    @media (max-width: 992px) {
      body {
        grid-template-columns: 200px 1fr;
      }
      
      .sidebar {
        width: 200px;
      }
      
      .nav-item {
        padding: 12px 15px;
      }
    }
    

    @media (max-width: 768px) {
      body {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        position: fixed;
        width: 100%;
        height: auto;
        top: 0;
        padding: 10px 0;
      }
      
      .logo {
        padding: 10px 0;
      }
      
      .logo h2 {
        display: none;
      }
      
      .nav-menu {
        display: flex;
        overflow-x: auto;
        margin-top: 10px;
        padding: 0 10px;
      }
      
      .nav-item {
        flex-direction: column;
        padding: 10px;
        min-width: 80px;
        text-align: center;
        border-left: none;
        border-bottom: 3px solid transparent;
      }
      
      .nav-item.active {
        border-left: none;
        border-bottom: 3px solid var(--primary);
      }
      
      .nav-item span {
        font-size: 0.8rem;
        margin-top: 5px;
      }
      
      .main {
        margin-top: 80px;
        padding: 15px;
      }
      
      .stats-container {
        grid-template-columns: 1fr;
      }
      
      .report-filters {
        flex-direction: column;
      }
      
      .filter-group {
        width: 100%;
      }
    }
    

    @media (max-width: 480px) {
      .Bari-Products {
        grid-template-columns: 1fr;
      }
      
      table {
        display: block;
        overflow-x: auto;
      }
      
      .submit-btn {
        width: 100%;
        justify-content: center;
      }
      
      .export-options {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div class="floating-elements" id="floatingElements"></div>
  
  <!-- SIDEBAR -->
  <div class="sidebar">
    <div class="logo">
      <i class="fa-solid fa-leaf"></i>
      <h2>Dalag Admin</h2>
    </div>
    <div class="nav-menu">
      <div class="nav-item active" data-section="dashboard">
        <i class="fa-solid fa-gauge"></i>
        <span>Dashboard</span>
      </div>
      <div class="nav-item" data-section="users">
        <i class="fa-solid fa-users"></i>
        <span>Users</span>
      </div>
      <div class="nav-item" data-section="products">
        <i class="fa-solid fa-box"></i>
        <span>Products</span>
      </div>
      <div class="nav-item" data-section="shopping-manager">
        <i class="fa-solid fa-store"></i>
        <span>Shopping</span>
      </div>
      <div class="nav-item" data-section="orders">
        <i class="fa-solid fa-cart-shopping"></i>
        <span>Orders</span>
      </div>
      <!-- NEW REPORT NAVIGATION ITEM -->
      <div class="nav-item" data-section="reports">
        <i class="fa-solid fa-chart-line"></i>
        <span>Reports</span>
      </div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="main">
    <!-- DASHBOARD SECTION -->
    <div class="section active" id="dashboard">
      <h1>Admin Dashboard</h1>
      <p>Welcome to Dalag Admin Panel. Manage your users, products, and reports from here.</p>
      
      <!-- Stats Overview -->
      <div class="stats-container">
        <div class="stat-card" style="animation-delay: 0.1s">
          <div class="stat-icon users-icon">
            <i class="fas fa-users"></i>
          </div>
          <h3>Total Users</h3>
          <p id="totalUsers">0</p>
          <div class="stat-change change-up">
            <i class="fas fa-arrow-up"></i> <span id="userChange">0%</span>
          </div>
        </div>
        
        <div class="stat-card" style="animation-delay: 0.2s">
          <div class="stat-icon products-icon">
            <i class="fas fa-box"></i>
          </div>
          <h3>Total Products</h3>
          <p id="totalProducts">0</p>
          <div class="stat-change change-up">
            <i class="fas fa-arrow-up"></i> <span id="productChange">0%</span>
          </div>
        </div>
        
        <div class="stat-card" style="animation-delay: 0.3s">
          <div class="stat-icon reports-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <h3>Total Reports</h3>
          <p id="totalReports">0</p>
          <div class="stat-change change-up">
            <i class="fas fa-arrow-up"></i> <span id="reportChange">0%</span>
          </div>
        </div>
      </div>
      
      <!-- Progress Overview -->
      <div class="stats-container">
        <div class="stat-card">
          <h3>User Growth</h3>
          <div class="progress-container">
            <div class="progress-title">
              <span>Target: 1000 users</span>
              <span id="userProgressValue">0%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill users-progress" id="userProgress" style="width: 0%"></div>
            </div>
          </div>
        </div>
        
        <div class="stat-card">
          <h3>Product Growth</h3>
          <div class="progress-container">
            <div class="progress-title">
              <span>Target: 500 products</span>
              <span id="productProgressValue">0%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill products-progress" id="productProgress" style="width: 0%"></div>
            </div>
          </div>
        </div>
        
        <div class="stat-card">
          <h3>Report Completion</h3>
          <div class="progress-container">
            <div class="progress-title">
              <span>Target: 200 reports</span>
              <span id="reportProgressValue">0%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill reports-progress" id="reportProgress" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Recent Activity -->
      <div class="activity-container">
        <div class="activity-header">
          <h2>Recent Activity</h2>
          <button class="submit-btn" id="refreshActivity">
            <i class="fas fa-sync-alt"></i> Refresh
          </button>
        </div>
        
        <ul class="activity-list" id="activityList">
          <li class="activity-item">
            <div class="activity-icon users-icon">
              <i class="fas fa-user-plus"></i>
            </div>
            <div class="activity-content">
              <h4>New User Registered</h4>
              <p>John Doe joined the platform</p>
              <div class="activity-time">2 minutes ago</div>
            </div>
          </li>
          
          <li class="activity-item">
            <div class="activity-icon products-icon">
              <i class="fas fa-cube"></i>
            </div>
            <div class="activity-content">
              <h4>Product Added</h4>
              <p>New product "Organic Tomatoes" was added to inventory</p>
              <div class="activity-time">15 minutes ago</div>
            </div>
          </li>
          
          <li class="activity-item">
            <div class="activity-icon reports-icon">
              <i class="fas fa-chart-pie"></i>
            </div>
            <div class="activity-content">
              <h4>Report Generated</h4>
              <p>Monthly sales report was generated</p>
              <div class="activity-time">1 hour ago</div>
            </div>
          </li>
          
          <li class="activity-item">
            <div class="activity-icon users-icon">
              <i class="fas fa-user-check"></i>
            </div>
            <div class="activity-content">
              <h4>User Updated</h4>
              <p>User profile for Jane Smith was updated</p>
              <div class="activity-time">3 hours ago</div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- USERS SECTION -->
    <div class="section" id="users">
      <h1>User Management</h1>
      <button class="submit-btn" onclick="window.location.href='userLogin.html'">
        <i class="fas fa-plus"></i> Add New User
      </button>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="usersTable">
          <!-- Users will be loaded here -->
        </tbody>
      </table>
    </div>

    <!-- PRODUCTS SECTION -->
    <div class="section" id="products">
      <h1>Product Management</h1>
      <button class="submit-btn" onclick="showProductForm()">
        <i class="fas fa-plus"></i> Add Product
      </button>

      <!-- Add Product Form (Initially Hidden) -->
      <div id="productForm" style="display: none; background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: var(--shadow);">
        <h3 style="margin-bottom: 20px;">Add New Product</h3>
        <div class="form-group">
          <label>Product Name</label>
          <input type="text" id="productName">
        </div>
        <div class="form-group">
          <label>Address</label>
          <input type="text" id="productAddress">
        </div>
        <div class="form-group">
          <label>Status</label>
          <select id="productStatus">
            <option value="Active">Active</option>
            <option value="Inactive">Inactive</option>
          </select>
        </div>
        <div class="form-group">
          <label>Weight (kg)</label>
          <input type="number" id="productWeight">
        </div>
        <div class="form-group">
          <label>Price ($)</label>
          <input type="number" id="productPrice" step="0.01">
        </div>
        <div class="form-group">
          <label>Product Image</label>
          <input type="file" id="productImage">
        </div>
        <button class="submit-btn" onclick="addProduct()">
          <i class="fas fa-save"></i> Submit
        </button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Image</th>
            <th>Name</th>
            <th>Address</th>
            <th>Status</th>
            <th>Weight</th>
            <th>Price</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="productsTable">
          <!-- Products will be loaded here -->
        </tbody>
      </table>
    </div>

    <!-- SHOPPING MANAGER SECTION -->
    <div class="section" id="shopping-manager">
      <h1>Shopping Manager</h1>
      <p>Manage and preview how products appear in the shopping center</p>

      <!-- Product Management Form -->
      <div style="background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: var(--shadow);">
        <h3 style="margin-bottom: 20px;">Product Details</h3>
        <div class="form-group">
          <label>Name</label>
          <input type="text" id="shopProductName" placeholder="Product Name" class="form-control" />
        </div>
        <div class="form-group">
          <label>Price ($)</label>
          <input type="number" id="shopProductPrice" placeholder="Price" class="form-control" step="0.01" />
        </div>
        <div class="form-group">
          <label>Weight</label>
          <input type="text" id="shopProductWeight" placeholder="Weight" class="form-control" />
        </div>
        <div class="form-group">
          <label>Address</label>
          <input type="text" id="shopProductAddress" placeholder="Address" class="form-control" />
        </div>
        <div class="form-group">
          <label>Status</label>
          <select id="shopProductStatus" class="form-control">
            <option value="Active">Active</option>
            <option value="Inactive">Inactive</option>
          </select>
        </div>
        <div class="form-group">
          <label>Product Image</label>
          <input type="file" id="shopProductImage" class="form-control" accept="image/*" />
          <small>Upload product image (JPEG, PNG, etc.)</small>
        </div>

        <button class="submit-btn" onclick="addShopProduct()">
          <i class="fas fa-save"></i> <span id="shopProductBtnText">Add Product</span>
        </button>
      </div>

      <!-- Shopping Center Preview -->
      <div class="shopping-preview">
        <div class="preview-header">
          <h3>Shopping Center Preview</h3>
          <button class="submit-btn" onclick="refreshPreview()">
            <i class="fas fa-sync-alt"></i> Refresh Preview
          </button>
        </div>

        <div class="Bari-Products" id="shoppingPreview">
          <!-- Products will be loaded here -->
        </div>
      </div>

      <!-- Product List Table -->
      <table style="margin-top: 30px;">
        <thead>
          <tr>
            <th>Name</th>
            <th>Price</th>
            <th>Weight</th>
            <th>Address</th>
            <th>Status</th>
            <th>Image</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="shopProductTable">
          <!-- Products will be loaded here -->
        </tbody>
      </table>
    </div>

    <!-- ORDERS SECTION -->
    <div class="section" id="orders">
      <h1>Order Management</h1>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>User</th>
            <th>Total</th>
            <th>Status</th>
            <th>Date</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="ordersTable">
          <!-- Orders will be loaded here -->
        </tbody>
      </table>
    </div>

    <!-- NEW REPORTS SECTION -->
    <div class="section" id="reports">
      <h1>Reports & Analytics</h1>
      <p>Generate and analyze business performance reports</p>
      
      <!-- Report Filters -->
      <div class="report-filters">
        <div class="filter-group">
          <label>Report Type</label>
          <select id="reportType" class="form-control" onchange="changeReportType()">
            <option value="sales">Sales Report</option>
            <option value="user">User Activity</option>
            <option value="product">Product Performance</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label>Date Range</label>
          <select id="dateRange" class="form-control">
            <option value="7">Last 7 Days</option>
            <option value="30" selected>Last 30 Days</option>
            <option value="90">Last 90 Days</option>
            <option value="custom">Custom Range</option>
          </select>
        </div>
        
        <div class="filter-group" id="customDateRange" style="display: none;">
          <label>Custom Range</label>
          <div style="display: flex; gap: 10px;">
            <input type="date" id="startDate" class="form-control">
            <input type="date" id="endDate" class="form-control">
          </div>
        </div>
        
        <button class="submit-btn" onclick="generateReport()">
          <i class="fas fa-chart-line"></i> Generate Report
        </button>
      </div>
      
      <!-- Export Options -->
      <div class="export-options">
        <button class="submit-btn" onclick="exportReport('pdf')">
          <i class="fas fa-file-pdf"></i> Export PDF
        </button>
        <button class="submit-btn" onclick="exportReport('excel')">
          <i class="fas fa-file-excel"></i> Export Excel
        </button>
        <button class="submit-btn" onclick="exportReport('print')">
          <i class="fas fa-print"></i> Print Report
        </button>
      </div>
      
      <!-- Summary Cards -->
      <div class="report-summary" id="reportSummary">
        <div class="summary-card">
          <h3>Total Sales</h3>
          <p id="totalSales">$0.00</p>
        </div>
        <div class="summary-card">
          <h3>Orders Completed</h3>
          <p id="completedOrders">0</p>
        </div>
        <div class="summary-card">
          <h3>New Customers</h3>
          <p id="newCustomers">0</p>
        </div>
        <div class="summary-card">
          <h3>Top Product</h3>
          <p id="topProduct">-</p>
        </div>
      </div>
      
      <!-- Chart Container -->
      <div class="chart-container">
        <canvas id="reportChart"></canvas>
      </div>
      
      <!-- Detailed Report Table -->
      <h3>Detailed Report</h3>
      <table id="reportTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Orders</th>
            <th>Sales</th>
            <th>Customers</th>
            <th>Top Product</th>
          </tr>
        </thead>
        <tbody id="reportTableBody">
          <!-- Report data will be loaded here -->
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // Create floating elements
    function createFloatingElements() {
      const container = document.getElementById('floatingElements');
      const elements = ['🌱', '🌾', '🍅', '🌽', '🍋', '🥕', '🍇', '🥦'];
      
      for (let i = 0; i < 12; i++) {
        const element = document.createElement('div');
        element.className = 'floating-element';
        element.textContent = elements[Math.floor(Math.random() * elements.length)];
        element.style.left = Math.random() * 100 + 'vw';
        element.style.top = Math.random() * 100 + 'vh';
        element.style.fontSize = (Math.random() * 20 + 15) + 'px';
        element.style.animationDuration = (Math.random() * 15 + 5) + 's';
        element.style.animationDelay = (Math.random() * 5) + 's';
        container.appendChild(element);
      }
    }

    // Animate counting up
    function animateValue(id, start, end, duration) {
      const obj = document.getElementById(id);
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        obj.innerHTML = Math.floor(progress * (end - start) + start);
        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      };
      window.requestAnimationFrame(step);
    }

    // Animate progress bars
    function animateProgress(id, value, target) {
      const percentage = Math.min(100, Math.round((value / target) * 100));
      const progressBar = document.getElementById(id);
      const progressValue = document.getElementById(id + 'Value');
      
      setTimeout(() => {
        progressBar.style.width = percentage + '%';
        progressValue.textContent = percentage + '%';
      }, 300);
    }

    // Load dashboard stats
    function loadDashboardStats() {
      // Simulate API call with setTimeout
      setTimeout(() => {
        // Mock data
        const userCount = 542;
        const productCount = 327;
        const reportCount = 128;
        
        const userChange = 12.5;
        const productChange = 8.3;
        const reportChange = 5.7;
        
        // Animate the counting up
        animateValue("totalUsers", 0, userCount, 1000);
        animateValue("totalProducts", 0, productCount, 1000);
        animateValue("totalReports", 0, reportCount, 1000);
        
        // Update change percentages
        document.getElementById("userChange").textContent = userChange + '%';
        document.getElementById("productChange").textContent = productChange + '%';
        document.getElementById("reportChange").textContent = reportChange + '%';
        
        // Animate progress bars
        animateProgress("userProgress", userCount, 1000);
        animateProgress("productProgress", productCount, 500);
        animateProgress("reportProgress", reportCount, 200);
      }, 500);
    }

    // Switch between sections
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', function() {
        // Update active nav item
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        this.classList.add('active');

        // Show corresponding section
        const sectionId = this.getAttribute('data-section');
        document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
        document.getElementById(sectionId).classList.add('active');

        // Load data for the section
        if (sectionId === 'dashboard') loadDashboardStats();
      });
    });

    // Initialize the dashboard
    document.addEventListener('DOMContentLoaded', () => {
      createFloatingElements();
      loadDashboardStats();
      
      // Add event listener for refresh button
      document.getElementById('refreshActivity').addEventListener('click', function() {
        showNotification('Activity refreshed!', 'success');
      });
    });

    // Global variables
    let currentProductId = null;
    let shopProducts = JSON.parse(localStorage.getItem("shopProducts")) || [];
    let currentEditIndex = null;
    let reportChart = null;

    // Initialize reports section
    function initializeReports() {
      // Set default date values
      const today = new Date();
      const thirtyDaysAgo = new Date();
      thirtyDaysAgo.setDate(today.getDate() - 30);
      
      document.getElementById('startDate').value = thirtyDaysAgo.toISOString().split('T')[0];
      document.getElementById('endDate').value = today.toISOString().split('T')[0];
      
      // Generate initial report
      generateReport();
    }

    // Change report type
    function changeReportType() {
      const reportType = document.getElementById('reportType').value;
      generateReport();
    }

    // Date range change handler
    document.getElementById('dateRange').addEventListener('change', function() {
      const customRange = document.getElementById('customDateRange');
      if (this.value === 'custom') {
        customRange.style.display = 'block';
      } else {
        customRange.style.display = 'none';
      }
    });

    // Generate report based on filters
    async function generateReport() {
      const reportType = document.getElementById('reportType').value;
      const dateRange = document.getElementById('dateRange').value;
      
      let startDate, endDate;
      
      if (dateRange === 'custom') {
        startDate = new Date(document.getElementById('startDate').value);
        endDate = new Date(document.getElementById('endDate').value);
      } else {
        endDate = new Date();
        startDate = new Date();
        startDate.setDate(endDate.getDate() - parseInt(dateRange));
      }
      
      try {
        // In a real application, you would fetch this data from your API
        // For demonstration, we'll use mock data
        const reportData = await fetchReportData(reportType, startDate, endDate);
        renderReportCharts(reportData, reportType);
        updateReportSummary(reportData);
        populateReportTable(reportData, reportType);
      } catch (error) {
        console.error("Error generating report:", error);
        showNotification("Failed to generate report", 'error');
      }
    }

    // Fetch report data (mock implementation)
    async function fetchReportData(reportType, startDate, endDate) {
      // This would be replaced with actual API calls in a real application
      return new Promise(resolve => {
        setTimeout(() => {
          // Generate mock data based on report type
          let data = [];
          const daysDiff = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24));
          
          for (let i = 0; i <= daysDiff; i++) {
            const date = new Date(startDate);
            date.setDate(startDate.getDate() + i);
            
            const sales = Math.floor(Math.random() * 1000) + 500;
            const orders = Math.floor(Math.random() * 20) + 5;
            const customers = Math.floor(Math.random() * 10) + 2;
            
            const products = ['Organic Tomatoes', 'Fresh Lettuce', 'Bell Peppers', 'Carrots', 'Cucumbers'];
            const topProduct = products[Math.floor(Math.random() * products.length)];
            
            data.push({
              date: date.toISOString().split('T')[0],
              sales: sales,
              orders: orders,
              customers: customers,
              topProduct: topProduct
            });
          }
          
          resolve(data);
        }, 500); // Simulate network delay
      });
    }

    // Render charts based on report data
    function renderReportCharts(data, reportType) {
      const ctx = document.getElementById('reportChart').getContext('2d');
      
      // Destroy previous chart if it exists
      if (reportChart) {
        reportChart.destroy();
      }
      
      const labels = data.map(item => {
        const date = new Date(item.date);
        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      });
      
      let datasetConfig = {};
      
      switch(reportType) {
        case 'sales':
          datasetConfig = {
            label: 'Sales ($)',
            data: data.map(item => item.sales),
            borderColor: '#2ed52e',
            backgroundColor: 'rgba(46, 213, 46, 0.1)',
            fill: true,
            tension: 0.4
          };
          break;
        case 'user':
          datasetConfig = {
            label: 'New Customers',
            data: data.map(item => item.customers),
            borderColor: '#4287f5',
            backgroundColor: 'rgba(66, 135, 245, 0.1)',
            fill: true,
            tension: 0.4
          };
          break;
        case 'product':
          // For product reports, we might want a different visualization
          // For simplicity, we'll show orders
          datasetConfig = {
            label: 'Orders',
            data: data.map(item => item.orders),
            borderColor: '#f54242',
            backgroundColor: 'rgba(245, 66, 66, 0.1)',
            fill: true,
            tension: 0.4
          };
          break;
      }
      
      reportChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [datasetConfig]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: getReportTitle(reportType),
              font: {
                size: 16
              }
            },
            legend: {
              position: 'top',
            }
          },
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    }

    function getReportTitle(reportType) {
      switch(reportType) {
        case 'sales': return 'Sales Report';
        case 'user': return 'User Activity Report';
        case 'product': return 'Product Performance Report';
        default: return 'Report';
      }
    }

    // Update report summary cards
    function updateReportSummary(data) {
      const totalSales = data.reduce((sum, item) => sum + item.sales, 0);
      const completedOrders = data.reduce((sum, item) => sum + item.orders, 0);
      const newCustomers = data.reduce((sum, item) => sum + item.customers, 0);
      
      // Find top product (simplified logic)
      const productCounts = {};
      data.forEach(item => {
        productCounts[item.topProduct] = (productCounts[item.topProduct] || 0) + 1;
      });
      
      let topProduct = '-';
      let maxCount = 0;
      for (const product in productCounts) {
        if (productCounts[product] > maxCount) {
          maxCount = productCounts[product];
          topProduct = product;
        }
      }
      
      document.getElementById('totalSales').textContent = `$${totalSales.toFixed(2)}`;
      document.getElementById('completedOrders').textContent = completedOrders;
      document.getElementById('newCustomers').textContent = newCustomers;
      document.getElementById('topProduct').textContent = topProduct;
    }

    // Populate report table with data
    function populateReportTable(data, reportType) {
      const tableBody = document.getElementById('reportTableBody');
      
      tableBody.innerHTML = data.map(item => `
        <tr>
          <td>${new Date(item.date).toLocaleDateString()}</td>
          <td>${item.orders}</td>
          <td>$${item.sales.toFixed(2)}</td>
          <td>${item.customers}</td>
          <td>${item.topProduct}</td>
        </tr>
      `).join('');
      
      // Add total row
      const totalSales = data.reduce((sum, item) => sum + item.sales, 0);
      const totalOrders = data.reduce((sum, item) => sum + item.orders, 0);
      const totalCustomers = data.reduce((sum, item) => sum + item.customers, 0);
      
      tableBody.innerHTML += `
        <tr style="font-weight: bold; background-color: #f5f5f5;">
          <td>TOTAL</td>
          <td>${totalOrders}</td>
          <td>$${totalSales.toFixed(2)}</td>
          <td>${totalCustomers}</td>
          <td>-</td>
        </tr>
      `;
    }

    // Export report functionality
    function exportReport(format) {
      // In a real application, this would generate and download the file
      // For this example, we'll just show a notification
      switch(format) {
        case 'pdf':
          showNotification('PDF export functionality would be implemented here', 'success');
          break;
        case 'excel':
          showNotification('Excel export functionality would be implemented here', 'success');
          break;
        case 'print':
          window.print();
          break;
      }
    }

    // Load dashboard stats
    async function loadDashboardStats() {
      try {
        const [usersRes, productsRes, ordersRes] = await Promise.all([
          fetch('http://localhost:3000/users'),
          fetch('http://localhost:3000/products'),
          fetch('http://localhost:3000/orders?status=Pending')
        ]);

        const users = await usersRes.json();
        const products = await productsRes.json();
        const orders = await ordersRes.json();

        // Animate the counting up
        animateValue("totalUsers", 0, users.length, 1000);
        animateValue("totalProducts", 0, products.length, 1000);
        animateValue("pendingOrders", 0, orders.length, 1000);
      } catch (error) {
        console.error("Error loading dashboard stats:", error);
      }
    }

    // USER MANAGEMENT
    async function loadUsers() {
      try {
        const response = await fetch('http://localhost:3000/users');
        const users = await response.json();

        const table = document.getElementById('usersTable');
        table.innerHTML = users.map(user => `
          <tr>
            <td>${user.id}</td>
            <td>${user.username}</td>
            <td>${user.email}</td>
            <td>
              <button class="action-btn edit-btn" onclick="editUser(${user.id})">
                <i class="fas fa-edit"></i> Edit
              </button>
              <button class="action-btn delete-btn" onclick="deleteUser(${user.id})">
                <i class="fas fa-trash"></i> Delete
              </button>
            </td>
          </tr>
        `).join('');
      } catch (error) {
        console.error("Error loading users:", error);
      }
    }

    async function deleteUser(userId) {
      if (confirm('Are you sure you want to delete this user?')) {
        try {
          await fetch(`http://localhost:3000/users/${userId}`, { method: 'DELETE' });
          loadUsers();
          showNotification('User deleted successfully!', 'success');
        } catch (error) {
          console.error("Error deleting user:", error);
          showNotification('Failed to delete user', 'error');
        }
      }
    }

    async function editUser(userId) {
      const newUsername = prompt('Enter new username:');
      const newEmail = prompt('Enter new email:');

      if (newUsername && newEmail) {
        try {
          await fetch(`http://localhost:3000/users/${userId}`, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username: newUsername, email: newEmail })
          });
          loadUsers();
          showNotification('User updated successfully!', 'success');
        } catch (error) {
          console.error("Error updating user:", error);
          showNotification('Failed to update user', 'error');
        }
      }
    }

    // PRODUCT MANAGEMENT
    function showProductForm(product = null) {
      const form = document.getElementById('productForm');
      form.style.display = 'block';

      if (product) {
        currentProductId = product.id;
        document.getElementById('productName').value = product.name;
        document.getElementById('productAddress').value = product.address;
        document.getElementById('productStatus').value = product.status;
        document.getElementById('productWeight').value = product.weight;
        document.getElementById('productPrice').value = product.price;
      } else {
        currentProductId = null;
        document.getElementById('productForm').reset();
      }
    }

    async function loadProducts() {
      try {
        const response = await fetch('http://localhost:3000/products');
        const products = await response.json();

        const table = document.getElementById('productsTable');
        table.innerHTML = products.map(product => `
          <tr>
            <td><img src="/uploads/${product.image_url}" width="50" height="50" style="object-fit: cover; border-radius: 4px;"></td>
            <td>${product.name}</td>
            <td>${product.address}</td>
            <td><span class="status-badge ${product.status.toLowerCase()}">${product.status}</span></td>
            <td>${product.weight}</td>
            <td>$${product.price}</td>
            <td>
              <button class="action-btn edit-btn" onclick="showProductForm(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                <i class="fas fa-edit"></i> Edit
              </button>
              <button class="action-btn delete-btn" onclick="deleteProduct(${product.id})">
                <i class="fas fa-trash"></i> Delete
              </button>
            </td>
          </tr>
        `).join('');
      } catch (error) {
        console.error("Error loading products:", error);
      }
    }

    async function addProduct() {
      const formData = new FormData();
      formData.append('name', document.getElementById('productName').value);
      formData.append('address', document.getElementById('productAddress').value);
      formData.append('status', document.getElementById('productStatus').value);
      formData.append('weight', document.getElementById('productWeight').value);
      formData.append('price', document.getElementById('productPrice').value);
      
      const imageFile = document.getElementById('productImage').files[0];
      if (imageFile) {
        formData.append('image', imageFile);
      }

      const token = localStorage.getItem('token');

      try {
        const url = currentProductId
          ? `http://localhost:3000/products/${currentProductId}`
          : 'http://localhost:3000/products';

        const method = currentProductId ? 'PUT' : 'POST';

        const response = await fetch(url, {
          method,
          headers: {
            'Authorization': `Bearer ${token}`
          },
          body: formData
        });

        if (!response.ok) {
          throw new Error('Failed to save product');
        }

        document.getElementById('productForm').style.display = 'none';
        loadProducts();
        showNotification(`Product ${currentProductId ? 'updated' : 'added'} successfully!`, 'success');
      } catch (error) {
        console.error("Error adding/updating product:", error);
        showNotification("Error saving product: " + error.message, 'error');
      }
    }

    async function deleteProduct(productId) {
      if (confirm('Are you sure you want to delete this product?')) {
        const token = localStorage.getItem('token');

        try {
          await fetch(`http://localhost:3000/products/${productId}`, {
            method: 'DELETE',
            headers: {
              'Authorization': `Bearer ${token}`
            }
          });
          loadProducts();
          showNotification('Product deleted successfully!', 'success');
        } catch (error) {
          console.error("Error deleting product:", error);
          showNotification('Failed to delete product', 'error');
        }
      }
    }

    // SHOPPING MANAGER FUNCTIONS
    function saveShopProducts() {
      localStorage.setItem("shopProducts", JSON.stringify(shopProducts));
    }

    function renderShopProducts() {
      const table = document.getElementById("shopProductTable");
      table.innerHTML = shopProducts.map((product, index) => `
        <tr>
          <td>${product.name}</td>
          <td>$${product.price}</td>
          <td>${product.weight}</td>
          <td>${product.address}</td>
          <td><span class="status-badge ${product.status.toLowerCase()}">${product.status}</span></td>
          <td><img src="${product.imageUrl || '/placeholder.jpg'}" width="50" height="50" style="object-fit: cover; border-radius: 4px;"></td>
          <td>
            <button class="action-btn edit-btn" onclick="editShopProduct(${index})">
              <i class="fas fa-edit"></i> Edit
            </button>
            <button class="action-btn delete-btn" onclick="deleteShopProduct(${index})">
              <i class="fas fa-trash"></i> Delete
            </button>
          </td>
        </tr>`
      ).join('');
      
      renderShoppingPreview();
    }

    function renderShoppingPreview() {
      const preview = document.getElementById("shoppingPreview");
      preview.innerHTML = shopProducts.filter(p => p.status === "Active").map(product => `
        <div class="Bari-Product">
          <img src="${product.imageUrl || '/placeholder.jpg'}" alt="${product.name}">
          <div class="product-info">
            <h4>${product.name}</h4>
            <p>Price: $${product.price}</p>
            <p>Weight: ${product.weight}</p>
            <p>Address: ${product.address}</p>
          </div>
        </div>
      `).join('');
    }

    function addShopProduct() {
      const name = document.getElementById("shopProductName").value;
      const price = parseFloat(document.getElementById("shopProductPrice").value);
      const weight = document.getElementById("shopProductWeight").value;
      const address = document.getElementById("shopProductAddress").value;
      const status = document.getElementById("shopProductStatus").value;
      const imageFile = document.getElementById("shopProductImage").files[0];

      if (!name || isNaN(price) || !weight || !address) {
        showNotification("Please fill all required fields correctly.", 'error');
        return;
      }

      const product = {
        id: Date.now().toString(),
        name,
        price,
        weight,
        address,
        status,
        imageUrl: ''
      };

      if (imageFile) {
        const reader = new FileReader();
        reader.onload = function(e) {
          product.imageUrl = e.target.result;
          saveProductToArray(product);
        };
        reader.readAsDataURL(imageFile);
      } else {
        // No image selected (use existing image if editing)
        if (currentEditIndex !== null && shopProducts[currentEditIndex].imageUrl) {
          product.imageUrl = shopProducts[currentEditIndex].imageUrl;
        }
        saveProductToArray(product);
      }
    }

    function saveProductToArray(product) {
      if (currentEditIndex !== null) {
        // Update existing product
        shopProducts[currentEditIndex] = product;
        currentEditIndex = null;
        document.getElementById("shopProductBtnText").textContent = "Add Product";
        showNotification('Product updated successfully!', 'success');
      } else {
        // Add new product
        shopProducts.push(product);
        showNotification('Product added successfully!', 'success');
      }
      
      saveShopProducts();
      renderShopProducts();
      clearShopProductForm();
    }

    function editShopProduct(index) {
      const product = shopProducts[index];
      document.getElementById("shopProductName").value = product.name;
      document.getElementById("shopProductPrice").value = product.price;
      document.getElementById("shopProductWeight").value = product.weight;
      document.getElementById("shopProductAddress").value = product.address;
      document.getElementById("shopProductStatus").value = product.status;
      currentEditIndex = index;
      document.getElementById("shopProductBtnText").textContent = "Update Product";
    }

    function deleteShopProduct(index) {
      if (confirm("Are you sure you want to delete this product?")) {
        shopProducts.splice(index, 1);
        saveShopProducts();
        renderShopProducts();
        showNotification('Product deleted successfully!', 'success');
      }
    }

    function clearShopProductForm() {
      document.getElementById("shopProductName").value = "";
      document.getElementById("shopProductPrice").value = "";
      document.getElementById("shopProductWeight").value = "";
      document.getElementById("shopProductAddress").value = "";
      document.getElementById("shopProductStatus").value = "Active";
      document.getElementById("shopProductImage").value = "";
    }

    function refreshPreview() {
      renderShoppingPreview();
      showNotification('Preview refreshed!', 'success');
    }

    // ORDER MANAGEMENT
    async function loadOrders() {
      try {
        const response = await fetch('http://localhost:3000/admin/orders');
        const data = await response.json();
        const orders = data.orders || data;

        const table = document.getElementById('ordersTable');
        table.innerHTML = orders.map(order => `
          <tr>
            <td>${order.order_id || order.id}</td>
            <td>${order.user_id}</td>
            <td>$${order.total_price || 0}</td>
            <td><span class="status-badge ${order.status}">${order.status}</span></td>
            <td>${new Date(order.created_at).toLocaleDateString()}</td>
            <td>
              <select onchange="updateOrderStatus(${order.order_id || order.id}, this.value)" class="status-select">
                <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Pending</option>
                <option value="confirmed" ${order.status === 'confirmed' ? 'selected' : ''}>Confirmed</option>
                <option value="delivered" ${order.status === 'delivered' ? 'selected' : ''}>Delivered</option>
                <option value="cancelled" ${order.status === 'cancelled' ? 'selected' : ''}>Cancelled</option>
              </select>
            </td>
          </tr>
        `).join('');
      } catch (error) {
        console.error("Error loading orders:", error);
      }
    }

    async function updateOrderStatus(orderId, newStatus) {
      const confirmUpdate = confirm(`Are you sure you want to mark order ${orderId} as "${newStatus}"?`);
      if (!confirmUpdate) return;

      try {
        const response = await fetch(`http://localhost:3000/orders/update-status`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ orderId, status: newStatus })
        });

        if (!response.ok) {
          const err = await response.json();
          showNotification("Failed to update order: " + err.message, 'error');
          return;
        }

        loadOrders();
        showNotification(`Order status updated to ${newStatus}`, 'success');
      } catch (error) {
        console.error("Error updating order:", error);
        showNotification("Error updating order status", 'error');
      }
    }

    // Notification system
    function showNotification(message, type) {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.innerHTML = `
        <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
        <span>${message}</span>
      `;
      
      document.body.appendChild(notification);
      
      // Slide in animation
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 10);
      
      // Remove after delay
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    // Initialize the dashboard
    document.addEventListener('DOMContentLoaded', () => {
      createFloatingElements();
      loadDashboardStats();
      loadUsers();
      loadProducts();
      loadOrders();
      renderShopProducts();
    });
  </script>
</body>

</html>